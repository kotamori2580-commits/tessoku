/**
 * 難易度（体感）：★★★★☆
 * 結果：CE/WA
 * 解法：[二分探索]→しゃくとり法がおすすめ
 * * 【学んだこと・ポイント】
 * ・while内の条件はwhile(l<=r)が多い
 * * 【反省・詰まった点】
 * 二分探索の書き方を覚える、しゃくとり法を学んだ
 * * 【計算量】
 * ・O(N log N)
 */


//二分探索
#include <bits/stdc++.h>
using namespace std;


int main(){
  int n, k;
  cin >> n >> k;
  vector<int> A(n+1);
  for(int i=1;i<=n;i++){
    cin >> A[i];
  }
  
  long long total=0;
  for(int i=1;i<=n;i++){
    int l,r;  
    l=i;
    r=n;
    int ok;
    while(l<=r){
      int m=(l+r)/2;
      if(A[m]-A[i]<=k){
        ok = m;
        l=m+1;
      }
      else{
        r=m-1;
      }
    }
    total += ok-i;
  }
  cout << total << "\n";
}






//以下、しゃくとり法
#include <bits/stdc++.h>
using namespace std;


int A[100009];

int main(){
  int n, k;
  cin >> n >> k;
  for(int i=1;i<=n;i++){
    cin >> A[i];
  }
  
  int r=1;
  long long total =0;
  for(int i=1;i<=n;i++){
    while(r<=n && A[r]-A[i]<=k){
      r ++;
    }
    total += (r-1)-i;
  } 
  cout << total << "\n";
}
